# 微信小程序配置文件详解

## 一、app.json 详解

app.json是小程序的全局配置文件，必须放在项目根目录。

### 1. pages配置

```json
{
  "pages": [
    "pages/index/index",
    "pages/logs/logs"
  ]
}
```

- **作用**：注册小程序的所有页面路径
- **规则**：
  - 第一个路径为首页
  - 路径不需要写文件后缀（.js, .json, .wxml, .wxss）
  - 路径分隔符使用斜杠（/）

### 2. window配置

```json
{
  "window": {
    "backgroundTextStyle": "light",
    "navigationBarBackgroundColor": "#fff",
    "navigationBarTitleText": "Hello World",
    "navigationBarTextStyle": "black",
    "backgroundColor": "#f5f5f5",
    "enablePullDownRefresh": false,
    "navigationStyle": "default"
  }
}
```

- **backgroundTextStyle**：下拉背景文字颜色（light/dark）
- **navigationBarBackgroundColor**：导航栏背景颜色
- **navigationBarTitleText**：导航栏标题
- **navigationBarTextStyle**：导航栏文字颜色（black/white）
- **backgroundColor**：窗口背景颜色
- **enablePullDownRefresh**：是否开启下拉刷新
- **navigationStyle**：导航栏样式（default/custom）

### 3. tabBar配置

```json
{
  "tabBar": {
    "color": "#999999",
    "selectedColor": "#07c160",
    "backgroundColor": "#ffffff",
    "list": [
      {
        "pagePath": "pages/index/index",
        "text": "首页",
        "iconPath": "images/home.png",
        "selectedIconPath": "images/home_active.png"
      },
      {
        "pagePath": "pages/logs/logs",
        "text": "日志",
        "iconPath": "images/log.png",
        "selectedIconPath": "images/log_active.png"
      }
    ]
  }
}
```

- **color**：未选中标签的颜色
- **selectedColor**：选中标签的颜色
- **backgroundColor**：标签栏背景颜色
- **list**：标签页列表（2-5个）
  - pagePath：页面路径
  - text：标签文字
  - iconPath：未选中图标
  - selectedIconPath：选中图标

### 4. networkTimeout配置

```json
{
  "networkTimeout": {
    "request": 10000,
    "connectSocket": 10000,
    "uploadFile": 10000,
    "downloadFile": 10000
  }
}
```

- **request**：wx.request超时时间（毫秒）
- **connectSocket**：wx.connectSocket超时时间
- **uploadFile**：wx.uploadFile超时时间
- **downloadFile**：wx.downloadFile超时时间

### 5. permission配置

```json
{
  "permission": {
    "scope.userLocation": {
      "desc": "你的位置信息将用于获取周边服务"
    }
  }
}
```

## 二、page.json 详解

每个页面都可以有自己的配置文件，会覆盖app.json中的window配置。

```json
{
  "navigationBarTitleText": "页面标题",
  "enablePullDownRefresh": true,
  "navigationBarBackgroundColor": "#ffffff",
  "navigationBarTextStyle": "black",
  "usingComponents": {
    "my-component": "/components/my-component/index"
  }
}
```

## 三、project.config.json 详解

这是微信开发者工具的配置文件，影响开发工具的行为。

```json
{
  "appid": "wx1234567890",
  "projectname": "my-wechat-app",
  "miniprogramRoot": ".",
  "setting": {
    "urlCheck": true,
    "es6": true,
    "enhance": true,
    "postcss": true,
    "preloadBackground": true
  },
  "libVersion": "3.2.0",
  "compileType": "miniprogram"
}
```

- **appid**：小程序的AppID
- **projectname**：项目名称
- **miniprogramRoot**：小程序源码目录
- **setting**：编译设置
  - urlCheck：是否检查域名
  - es6：是否启用ES6转ES5
  - enhance：是否启用增强编译
  - postcss：是否启用CSS预处理
- **libVersion**：基础库版本
- **compileType**：编译类型

## 四、常用配置项速查表

| 配置项 | 位置 | 说明 |
|--------|------|------|
| pages | app.json | 页面路径 |
| window | app.json | 窗口配置 |
| tabBar | app.json | 标签页配置 |
| networkTimeout | app.json | 网络超时 |
| navigationBarTitleText | page.json | 页面标题 |
| enablePullDownRefresh | page.json | 下拉刷新 |
| usingComponents | page.json | 组件引用 |
| urlCheck | project.config.json | 域名检查 |
